import React, { useState } from "react";

const App = () => {
  const [modalPlan, setModalPlan] = useState("");
  const [modalAmount, setModalAmount] = useState("");
  const [showPaymentModal, setShowPaymentModal] = useState(false);
  const [showMpesaPopup, setShowMpesaPopup] = useState(false);

  const openModal = (plan, amount) => {
    setModalPlan(plan);
    setModalAmount(amount);
    setShowPaymentModal(true);
  };

  const closeModal = () => setShowPaymentModal(false);
  const closeMpesaPopup = () => setShowMpesaPopup(false);

  const showMpesaNumber = () => {
    setShowPaymentModal(false);
    setShowMpesaPopup(true);
  };

  const copyMpesaNumber = () => {
    navigator.clipboard.writeText("0113554446").then(() => {
      alert("M-Pesa number copied!");
    });
  };

  const pay = (method) => {
    if (method === "M-Pesa") showMpesaNumber();
    else {
      alert(`You chose ${method}. Integration goes here.`);
      closeModal();
    }
  };

  return (
    <div className="flex flex-col min-h-screen text-white font-sans bg-[#0D0D0D]">
      {/* Header */}
      <header className="text-center py-6 text-5xl font-bold text-[#D4AF37] border-b border-[#D4AF37] sticky top-0 z-10 bg-[#3D2C41]">
        KAIRAH STUDIO
      </header>

      <div className="flex flex-1">
        {/* Sidebar */}
        <aside className="bg-[#3D2C41] w-64 min-h-screen p-6 flex flex-col gap-2">
          <a href="#Hero" className="hover:text-[#00FF99]">Home</a>
          <a href="#Dashboard" className="hover:text-[#00FF99]">Dashboard</a>
          <a href="#Pricing" className="hover:text-[#00FF99]">Pricing / Plans</a>
          <a href="#VideoCreation" className="hover:text-[#00FF99]">Video Creation</a>
          <a href="#PromptLibrary" className="hover:text-[#00FF99]">Prompt Library</a>
          <a href="#Affiliates" className="hover:text-[#00FF99]">Affiliates</a>
          <a href="#FAQ" className="hover:text-[#00FF99]">FAQ</a>
          <a href="#Support" className="hover:text-[#00FF99]">Support / Contact</a>
          <a href="#Settings" className="hover:text-[#00FF99]">Settings / Profile</a>
          <a href="#Terms" className="hover:text-[#00FF99]">Terms & Policies</a>
          <a href="#Notifications" className="hover:text-[#00FF99]">Notifications</a>
          <a href="#Activity" className="hover:text-[#00FF99]">Activity / History</a>
        </aside>

        {/* Main Content */}
        <main className="flex-1 p-6 overflow-y-auto">
          {/* Hero Section */}
          <section id="Hero" className="mb-12">
            <h1 className="text-5xl font-bold mb-4 text-[#D4AF37]">Welcome to Kairah Studio</h1>
            <p className="text-gray-300 text-xl">
              Create stunning AI-generated videos effortlessly. Bring your ideas to life in cinematic quality. Choose your plan and start creating today.
            </p>
          </section>

          {/* Dashboard */}
          <section id="Dashboard" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Dashboard</h2>
            <p className="text-gray-300 mb-4">
              Overview of stats, video history, credits, and quick actions.
            </p>
            <ul className="list-disc list-inside text-gray-300">
              <li>Total videos created</li>
              <li>Credits remaining</li>
              <li>Plan type & expiration</li>
              <li>Quick render actions</li>
            </ul>
          </section>

          {/* Pricing / Plans */}
          <section id="Pricing" className="mb-12">
            <h2 className="text-4xl font-bold mb-6 text-[#D4AF37]">Pricing / Plans</h2>
            <div className="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6">
              <PlanCard title="Free" price="â‚¤0 / month" duration="6 seconds" features={["1 short teaser video", "Perfect for testing", "Limited resolution"]} booster="Not included" disabled />
              <PlanCard title="Pro" price="$19 / month" duration="up to 30 seconds" features={["10 full-quality videos per month","Faster rendering","Standard cinematic effects","Yearly Plan: $300"]} booster="Free for 30 days" onClick={() => openModal("Pro", 19)} />
              <PlanCard title="Diamond" price="$49 / month" duration="up to 1 minute" features={["Unlimited HD videos","Priority rendering","Premium effects & transitions","Yearly Plan: $450"]} booster="Free for 6 months" onClick={() => openModal("Diamond", 49)} />
              <PlanCard title="Cinematic" price="$99 / month" duration="2â€“3 minutes" features={["Unlimited ultra-HD videos","Advanced cinematic filters","Sound-enhanced AI voice scenes","Yearly Plan: $600"]} booster="Free permanently" onClick={() => openModal("Cinematic", 99)} />
              <PlanCard title="Lifetime" price="$500 / one-time" duration="Unlimited access forever" features={["Unlimited cinematic generation","All future features included","Lifetime priority support"]} booster="Free permanently" onClick={() => openModal("Lifetime", 500)} />
            </div>
          </section>

          {/* Video Creation */}
          <section id="VideoCreation" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Video Creation</h2>
            <p className="text-gray-300 mb-2">
              Create and render AI-powered cinematic videos directly from your dashboard. Choose duration, style, effects, and audio.
            </p>
            <ul className="list-disc list-inside text-gray-300">
              <li>Duration: 6s (Free) up to unlimited (Lifetime)</li>
              <li>Style: Funny, Royal, Baby, Fantasy, Cinematic</li>
              <li>Effects: Standard or advanced depending on plan</li>
              <li>Audio: AI voice and background soundtracks</li>
            </ul>
          </section>

          {/* Prompt Library */}
          <section id="PromptLibrary" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Prompt Library</h2>
            <p className="text-gray-300 mb-2">
              Access categorized prompts. Use "Prompt Magic" to enhance your AI input instantly.
            </p>
            <ul className="list-disc list-inside text-gray-300">
              <li>Categories: Funny, Royal, Baby, Fantasy, Cinematic</li>
              <li>Instant refinement and optimization for AI output</li>
            </ul>
          </section>

          {/* Affiliates */}
          <section id="Affiliates" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Affiliates</h2>
            <p className="text-gray-300 mb-2">
              Earn 30% commission on all referred subscriptions. Lifetime plan: $500 bonus per 100 sales.
            </p>
            <ul className="list-disc list-inside text-gray-300">
              <li>Track clicks, conversions, and payouts from your dashboard</li>
              <li>Marketing assets provided (banners, links, templates)</li>
            </ul>
          </section>

          {/* FAQ */}
          <section id="FAQ" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">FAQ</h2>
            <ul className="list-disc list-inside text-gray-300 space-y-1">
              <li>How do I create my first video? â€“ Go to Video Creation, input your prompt, select duration & style, render.</li>
              <li>What formats are supported? â€“ MP4, HD quality, ultra-HD for Cinematic and Lifetime.</li>
              <li>Can I upgrade my plan? â€“ Yes, upgrades are instant and prorated.</li>
              <li>Is there a free trial? â€“ Free plan allows one 6-second video per email.</li>
              <li>How do I get affiliate payouts? â€“ Via email linked to your dashboard.</li>
              <li>What is the Kairah Fame Booster? â€“ Extra promotional tools for subscribers.</li>
              <li>Are payments secure? â€“ All major payment gateways integrated.</li>
              <li>Can I cancel my subscription? â€“ Yes, anytime from the dashboard.</li>
              <li>Is support available 24/7? â€“ Primarily email; response within 24 hours.</li>
              <li>Do you offer custom video requests? â€“ Contact support for special requests.</li>
            </ul>
          </section>

          {/* Support / Contact */}
          <section id="Support" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Support / Contact</h2>
            <p className="text-gray-300">Email: <a href="mailto:keishapoa@gmail.com" className="underline text-[#00FF99]">keishapoa@gmail.com</a></p>
            <p className="text-gray-300">Support is primarily email-based, response within 24 hours.</p>
          </section>

          {/* Settings / Profile */}
          <section id="Settings" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Settings / Profile</h2>
            <ul className="list-disc list-inside text-gray-300">
              <li>Update profile information</li>
              <li>Change password</li>
              <li>Manage subscription & plan</li>
              <li>Configure notification preferences</li>
            </ul>
          </section>

          {/* Terms / Policies */}
          <section id="Terms" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Terms & Policies</h2>
            <p className="text-gray-300">
              All content generated is owned by the user. Payments are non-refundable unless stated. Use AI tools responsibly. Kairah Studio disclaims liability for misuse of content.
            </p>
          </section>

          {/* Notifications */}
          <section id="Notifications" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Notifications</h2>
            <p className="text-gray-300">Receive updates about:</p>
            <ul className="list-disc list-inside text-gray-300">
              <li>Subscription renewal reminders</li>
              <li>New features & updates</li>
              <li>Affiliate performance alerts</li>
              <li>Video processing status</li>
            </ul>
          </section>

          {/* Activity / History */}
          <section id="Activity" className="mb-12">
            <h2 className="text-4xl font-bold mb-4 text-[#D4AF37]">Activity / History</h2>
            <ul className="list-disc list-inside text-gray-300">
              <li>Video creation logs</li>
              <li>Credit usage history</li>
              <li>Subscription changes & payments</li>
              <li>Affiliate clicks & conversions</li>
            </ul>
          </section>
        </main>
      </div>

      {/* Footer */}
      <footer className="text-center p-4 text-gray-400 border-t border-gray-700">
        Â© 2025 Kairah Studio â€” Divine Cinematics by AI
      </footer>

      {/* Payment Modal */}
      {showPaymentModal && (
        <div className="fixed inset-0 flex items-center justify-center z-50">
          <div className="absolute inset-0 bg-black opacity-60"></div>
          <div className="bg-[#0b0a0f] rounded-2xl p-8 border border-[rgba(255,255,255,0.2)] max-w-sm w-[90%] text-center z-50">
            <h2 className="text-2xl mb-4 text-[#D4AF37]">Pay for {modalPlan}</h2>
            <p className="text-gray-300 mb-4">Amount: ${modalAmount}</p>
            <div className="flex flex-col gap-2">
              {["Paystack","Stripe","PayPal","Wise"].map((m,i)=>(
                <button key={i} className="bg-white text-black py-2 rounded-lg" onClick={()=>pay(m)}>{m}</button>
              ))}
              <button className="bg-green-500 py-2 rounded-lg" onClick={showMpesaNumber}>M-Pesa</button>
              <button className="mt-4 bg-gray-600 text-white py-2 rounded-lg" onClick={closeModal}>Cancel</button>
            </div>
          </div>
        </div>
      )}

      {/* M-Pesa Popup */}
      {showMpesaPopup && (
        <div className="fixed inset-0 flex items-center justify-center z-50">
          <div className="absolute inset-0 bg-black opacity-60"></div>
          <div className="bg-[#0b0a0f] rounded-2xl p-8 border border-[rgba(255,255,255,0.2)] max-w-sm w-[90%] text-center z-50">
            <h2 className="text-2xl mb-4 text-[#D4AF37]">Pay with M-Pesa</h2>
            <p className="text-gray-300 mb-2">Send your payment to this number:</p>
            <div className="flex items-center justify-center gap-2 mb-4">
              <span className="text-white font-bold text-lg">0113554446</span>
              <button className="bg-gray-200 text-black px-3 py-1 rounded" onClick={copyMpesaNumber}>Copy</button>
            </div>
            <p className="text-gray-400 text-sm mb-4">
              1. Open M-Pesa &gt; Send Money<br/>
              2. Enter 0113554446 &gt; Amount<br/>
              3. Confirm with PIN &gt; Send<br/>
              4. Email your username for access
            </p>
            <button className="mt-4 bg-gray-600 text-white py-2 rounded-lg" onClick={closeMpesaPopup}>Close</button>
          </div>
        </div>
      )}
    </div>
  );
};

// Reusable PlanCard
const PlanCard = ({ title, price, duration, features, booster, onClick, disabled }) => (
  <div className="card bg-[rgba(255,255,255,0.05)] border border-[rgba(255,255,255,0.15)] rounded-2xl p-6 flex flex-col items-center hover:translate-y-[-5px] hover:shadow-[0_0_30px_rgba(212,175,55,0.3)] transition-all">
    <div className="badge bg-[#D4AF37] text-black font-bold px-2 py-1 rounded text-sm mb-2">{title}</div>
    <h2 className="text-2xl font-semibold mb-2 text-[#D4AF37]">{title}</h2>
    <p className="text-gray-400 mb-2">{price}</p>
    <p className="text-sm text-gray-300 mb-4">Duration: {duration}</p>
    <ul className="text-sm text-gray-300 space-y-1 mb-4">{features.map((f,i)=><li key={i}>ðŸŽ¬ {f}</li>)}</ul>
    <div className="text-[#00FF99] font-semibold mt-2 text-sm">Kairah Fame Booster: {booster}</div>
    <button className={`mt-2 px-5 py-2 w-full font-semibold rounded ${disabled ? "bg-gray-500 text-white" : "bg-[#D4AF37] text-black hover:bg-[#b9962f]"}`} onClick={onClick} disabled={disabled}>
      {disabled ? "Included" : "Subscribe"}
    </button>
  </div>
);

export default App;
